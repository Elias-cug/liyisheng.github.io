(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{289:function(t,s,a){"use strict";a.r(s);var e=a(13),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" React")]),t._v(" "),s("h2",{attrs:{id:"ç”Ÿå‘½å‘¨æœŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿå‘½å‘¨æœŸ"}},[t._v("#")]),t._v(" ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),s("p",[s("strong",[t._v("è¿‡ç¨‹â€”â€”â€”â€”åˆå§‹åŒ–é˜¶æ®µ")])]),t._v(" "),s("ol",[s("li",[t._v("getDefaultProps:è·å–å®ä¾‹çš„é»˜è®¤å±æ€§")]),t._v(" "),s("li",[t._v("getInitialState:è·å–æ¯ä¸ªå®ä¾‹çš„åˆå§‹åŒ–çŠ¶æ€")]),t._v(" "),s("li",[t._v("componentWillMountï¼šç»„ä»¶å³å°†è¢«è£…è½½ã€æ¸²æŸ“åˆ°é¡µé¢ä¸Š")]),t._v(" "),s("li",[t._v("render:ç»„ä»¶åœ¨è¿™é‡Œç”Ÿæˆè™šæ‹Ÿçš„ DOM èŠ‚ç‚¹")]),t._v(" "),s("li",[t._v("componentDidMount:ç»„ä»¶çœŸæ­£åœ¨è¢«è£…è½½ä¹‹å")])]),t._v(" "),s("p",[s("strong",[t._v("è¿è¡Œä¸­çŠ¶æ€")])]),t._v(" "),s("ol",[s("li",[t._v("componentWillReceiveProps:ç»„ä»¶å°†è¦æ¥æ”¶åˆ°å±æ€§çš„æ—¶å€™è°ƒç”¨")]),t._v(" "),s("li",[t._v("shouldComponentUpdate:ç»„ä»¶æ¥å—åˆ°æ–°å±æ€§æˆ–è€…æ–°çŠ¶æ€çš„æ—¶å€™ï¼ˆå¯ä»¥è¿”å› falseï¼Œæ¥æ”¶æ•°æ®åä¸æ›´æ–°ï¼Œé˜»æ­¢ render è°ƒç”¨ï¼Œåé¢çš„å‡½æ•°ä¸ä¼šè¢«ç»§ç»­æ‰§è¡Œäº†ï¼‰")]),t._v(" "),s("li",[t._v("componentWillUpdate:ç»„ä»¶å³å°†æ›´æ–°ä¸èƒ½ä¿®æ”¹å±æ€§å’ŒçŠ¶æ€")]),t._v(" "),s("li",[t._v("render:ç»„ä»¶é‡æ–°æç»˜")]),t._v(" "),s("li",[t._v("componentDidUpdate:ç»„ä»¶å·²ç»æ›´æ–°")])]),t._v(" "),s("p",[s("strong",[t._v("é”€æ¯é˜¶æ®µ")])]),t._v(" "),s("ol",[s("li",[t._v("componentWillUnmount:ç»„ä»¶å³å°†é”€æ¯")])]),t._v(" "),s("p",[s("strong",[t._v("æ–°ç‰ˆç”Ÿå‘½å‘¨æœŸ")])]),t._v(" "),s("ol",[s("li",[t._v("ä½¿ç”¨ getDerivedStateFromProps æ›¿æ¢ componentWillMount")]),t._v(" "),s("li",[t._v("ä½¿ç”¨ getSnapshotBeforeUpdate æ›¿æ¢ componentWillUpdate")]),t._v(" "),s("li",[t._v("é¿å…ä½¿ç”¨ componentWillReceiveProps")])]),t._v(" "),s("blockquote",[s("p",[t._v("å…¶å®è¯¥å˜åŠ¨çš„åŸå› æ­£æ˜¯ç”±äºä¸Šè¿°æåˆ°çš„ Fiberã€‚é¦–å…ˆä»ä¸Šé¢æˆ‘ä»¬çŸ¥é“ React å¯ä»¥åˆ†æˆ reconciliation ä¸ commit ä¸¤ä¸ªé˜¶æ®µ> å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹:")])]),t._v(" "),s("p",[t._v("reconciliation:")]),t._v(" "),s("ol",[s("li",[t._v("componentWillMount")]),t._v(" "),s("li",[t._v("componentWillReceiveProps")]),t._v(" "),s("li",[t._v("shouldComponentUpdate")]),t._v(" "),s("li",[t._v("componentWillUpdate")])]),t._v(" "),s("p",[t._v("commit:")]),t._v(" "),s("ol",[s("li",[t._v("componentDidMount")]),t._v(" "),s("li",[t._v("componentDidUpdate")]),t._v(" "),s("li",[t._v("componentWillUnmount")])]),t._v(" "),s("h2",{attrs:{id:"react-ä¸­-refs-çš„ä½œç”¨æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-ä¸­-refs-çš„ä½œç”¨æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" React ä¸­ refs çš„ä½œç”¨æ˜¯ä»€ä¹ˆ")]),t._v(" "),s("ol",[s("li",[t._v("è·å–å­ç»„ä»¶å®ä¾‹ï¼Œæ“ä½œå­ç»„ä»¶çš„ä¸€äº›æ–¹æ³•")]),t._v(" "),s("li",[t._v("åšæŒä¹…åŒ–å­˜å‚¨")])]),t._v(" "),s("h2",{attrs:{id:"ç»„ä»¶é€šä¿¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»„ä»¶é€šä¿¡"}},[t._v("#")]),t._v(" ç»„ä»¶é€šä¿¡")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("çˆ¶å­ç»„ä»¶é€šä¿¡\nçˆ¶ç»„ä»¶é€šè¿‡å‘å­ç»„ä»¶ä¼ é€’ props")])]),t._v(" "),s("li",[s("p",[t._v("å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡\nçˆ¶ç»„ä»¶å°†ä¸€ä¸ªå‡½æ•°ä½œä¸º props ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶è°ƒç”¨å›è°ƒå‡½æ•°")])]),t._v(" "),s("li",[s("p",[t._v("è·¨çº§ç»„ä»¶é€šä¿¡\na) ä¸­é—´ç»„ä»¶å±‚å±‚ä¼ é€’ props\nb) ğŸ ä½¿ç”¨ context å¯¹è±¡")])]),t._v(" "),s("li",[s("p",[t._v("éåµŒå¥—ç»„ä»¶é—´é€šä¿¡\na) åˆ©ç”¨äºŒè€…å…±åŒçˆ¶ç»„ä»¶çš„ context è¿›è¡Œé€šä¿¡\nb) ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶çš„æ–¹å¼")])]),t._v(" "),s("li",[s("p",[t._v("ä½¿ç”¨ redux è¿›è¡Œé€šä¿¡")])])]),t._v(" "),s("h2",{attrs:{id:"context-ä½¿ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#context-ä½¿ç”¨"}},[t._v("#")]),t._v(" context ä½¿ç”¨")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. åˆ›å»ºå¹¶å¯¼å‡º context å¯¹è±¡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Consumer "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. å¯¼å…¥å¹¶ä½¿ç”¨å‡½æ•°è·å–è¦æ¶ˆè´¹çš„çŠ¶æ€")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. hookä¸‹ä½¿ç”¨ useContext è·å–è¦æ¶ˆè´¹çš„çŠ¶æ€")]),t._v("\n")])])]),s("h2",{attrs:{id:"hook-ä¸‹æ€ä¹ˆä½¿ç”¨-shouldcomponentupdate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hook-ä¸‹æ€ä¹ˆä½¿ç”¨-shouldcomponentupdate"}},[t._v("#")]),t._v(" hook ä¸‹æ€ä¹ˆä½¿ç”¨ ShouldComponentUpdate")]),t._v(" "),s("p",[t._v("ä½¿ç”¨React.memoåŒ…è£¹ç»„ä»¶")]),t._v(" "),s("h2",{attrs:{id:"reactä¸­å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reactä¸­å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" reactä¸­å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ")]),t._v(" "),s("ol",[s("li",[t._v("å‡½æ•°ç»„ä»¶æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªpropså¯¹è±¡è¿”å›ä¸€ä¸ªreactå…ƒç´ ï¼›è€Œç±»ç»„ä»¶éœ€è¦å»ç»§æ‰¿React.Componentå¹¶ä¸”åˆ›å»ºrenderå‡½æ•°è¿”å›reactå…ƒç´ ")]),t._v(" "),s("li",[t._v("å‡½æ•°ç»„ä»¶æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€stateï¼Œè€Œç±»ç»„ä»¶æœ‰")])]),t._v(" "),s("h2",{attrs:{id:"purecomponent-component-åŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#purecomponent-component-åŒºåˆ«"}},[t._v("#")]),t._v(" PureComponent Component åŒºåˆ«")]),t._v(" "),s("ol",[s("li",[t._v("å‡ ä¹ç›¸åŒï¼Œä½†æ˜¯ PureComponent é€šè¿‡ prop å’Œ state çš„æµ…æ¯”è¾ƒæ¥å®ç°")])]),t._v(" "),s("h2",{attrs:{id:"ä½¿ç”¨-react-çš„ä¸€äº›å‘ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨-react-çš„ä¸€äº›å‘ç‚¹"}},[t._v("#")]),t._v(" ä½¿ç”¨ React çš„ä¸€äº›å‘ç‚¹")]),t._v(" "),s("ol",[s("li",[t._v("JSX åšè¡¨è¾¾å¼åˆ¤æ–­æ—¶å€™éœ€è¦å¼ºè½¬ä¸º boolean")]),t._v(" "),s("li",[t._v("å°½é‡ä¸è¦åœ¨ componentWillReviceProps é‡Œä½¿ç”¨ setState å¦‚æœä¸€å®šè¦ä½¿ç”¨é‚£ä¹ˆéœ€è¦åˆ¤æ–­ç»“æŸæ¡ä»¶ä¸ç„¶ä¼šå‡ºç°æ— é™é‡æ¸²æŸ“å¯¼è‡´é¡µé¢å´©æºƒ")]),t._v(" "),s("li",[t._v("ç»™ç»„ä»¶æ·»åŠ  ref æ—¶å€™å°½é‡ä¸è¦ä½¿ç”¨åŒ¿åå‡½æ•°å› ä¸ºå½“ç»„ä»¶æ›´æ–°çš„æ—¶å€™åŒ¿åå‡½æ•°ä¼šè¢«å½“åšæ–°çš„ prop å¤„ç†è®© ref å±æ€§æ¥å—åˆ°æ–°å‡½æ•°çš„æ—¶å€™ react å†…éƒ¨ä¼šå…ˆæ¸…ç©º ref ä¹Ÿå°±æ˜¯ä¼šä»¥ null ä¸ºå›è°ƒå‚æ•°å…ˆæ‰§è¡Œä¸€æ¬¡ ref è¿™ä¸ª props ç„¶ååœ¨ä»¥è¯¥ç»„ä»¶çš„å®ä¾‹æ‰§è¡Œä¸€æ¬¡ ref æ‰€ä»¥ç”¨åŒ¿åå‡½æ•°åš ref çš„æ—¶å€™æœ‰çš„æ—¶å€™å» ref èµ‹å€¼åçš„å±æ€§ä¼šå–åˆ° null")]),t._v(" "),s("li",[t._v("éå†å­èŠ‚ç‚¹çš„æ—¶å€™ä¸è¦ç”¨ index ä½œä¸ºç»„ä»¶çš„ key è¿›è¡Œä¼ å…¥")])]),t._v(" "),s("h2",{attrs:{id:"react-class-æ„å»ºæ—¶-super-props-çš„ä½œç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-class-æ„å»ºæ—¶-super-props-çš„ä½œç”¨"}},[t._v("#")]),t._v(" react class æ„å»ºæ—¶ï¼Œsuper(props)çš„ä½œç”¨")]),t._v(" "),s("p",[t._v("ä¸ºäº†ä½¿ å­ç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨ this.props è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„ propsã€‚")]),t._v(" "),s("h2",{attrs:{id:"è°ƒç”¨-setstate-ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒç”¨-setstate-ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ"}},[t._v("#")]),t._v(" è°ƒç”¨ setState ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("å°†è¦æ›´æ–°çš„ state å‹å…¥ä¸€ä¸ªå¾…æ›´æ–°é˜Ÿåˆ—ï¼ˆå³å†…éƒ¨å®ä¾‹çš„_pendingStateQueueï¼‰")])]),t._v(" "),s("li",[s("p",[t._v("æ‰§è¡Œå…¥æ ˆæ›´æ–°æ“ä½œ enqueueUpdate, åˆ¤æ–­æ˜¯å¦å¤„äºæ‰¹é‡æ›´æ–°çŠ¶æ€")])]),t._v(" "),s("li",[s("p",[t._v("å¦‚è‹¥æ­£å¤„äºæ›´æ–°ï¼Œé‚£ä¹ˆå°±å…ˆæŠŠå®ä¾‹æ¨è¿› dirtyComponents é‡Œç­‰å¾…ä¸‹ä¸€æ¬¡æ‰¹é‡æ›´æ–°")])]),t._v(" "),s("li",[s("p",[t._v("å¦‚æœæ²¡æœ‰æ‰¹é‡æ›´æ–°æ­£åœ¨æ‰§è¡Œï¼Œåˆ™ä¼šè°ƒç”¨ä¸€ä¸ªæ‰¹é‡æ›´æ–°ä»»åŠ¡")])]),t._v(" "),s("li",[s("p",[t._v("åœ¨ä»£ç ä¸­è°ƒç”¨ setState å‡½æ•°ä¹‹åï¼ŒReactä¼šå°†ä¼ å…¥çš„å‚æ•°å¯¹è±¡è¯­ç»„ä»¶å½“å‰çš„çŠ¶æ€åˆå¹¶ï¼Œç„¶åè§¦å‘è°ƒå’Œè¿‡ç¨‹ã€‚ç»è°ƒå’Œè¿‡ç¨‹å§ï¼ŒReact ä¼šä»¥ç›¸å¯¹é«˜æ•ˆçš„æ–¹å¼æ ¹æ®æ–°çš„çŠ¶æ€æ„å»º React å…ƒç´ æ ‘å¹¶ä¸”ç€æ‰‹é‡æ–°æ¸²æŸ“æ•´ä¸ª UI ç•Œé¢ã€‚åœ¨ React å¾—åˆ°å…ƒç´ æ ‘ä¹‹åï¼ŒReact ä¼šè‡ªåŠ¨è®¡ç®—å‡ºæ–°çš„æ ‘è¯­è€æ ‘çš„èŠ‚ç‚¹å·®å¼‚å¯¹ç•Œé¢è¿›è¡Œæœ€å°åŒ–é‡æ¸²æŸ“ã€‚åœ¨å·®å¼‚è®¡ç®—ç®—æ³•ä¸­ï¼ŒReact èƒ½å¤Ÿç›¸å¯¹ç²¾ç¡®åœ°çŸ¥é“å“ªäº›ä½ç½®å‘ç”Ÿäº†æ”¹å˜ä»¥åŠåº”è¯¥å¦‚ä½•æ”¹å˜ï¼Œè¿™å°±ä¿è¯äº†æŒ‰éœ€æ›´æ–°ï¼Œè€Œä¸æ˜¯å…¨éƒ¨é‡æ–°æ¸²æŸ“ã€‚å¦‚æœåœ¨çŸ­æ—¶é—´å†…é¢‘ç¹setStateï¼ŒReact ä¼šå°†stateçš„æ”¹å˜å‹å…¥æ ˆä¸­ï¼Œåœ¨åˆé€‚çš„æ—¶æœºï¼Œæ‰¹é‡æ›´æ–°stateå’Œè§†å›¾ï¼Œè¾¾åˆ°æé«˜æ€§èƒ½æ•ˆæœã€‚")])])]),t._v(" "),s("h2",{attrs:{id:"setstateæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setstateæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥"}},[t._v("#")]),t._v(" setStateæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥")]),t._v(" "),s("p",[s("strong",[t._v("åŒæ­¥")])]),t._v(" "),s("ol",[s("li",[t._v("é¦–å…ˆåœ¨legacyæ¨¡å¼ä¸‹")]),t._v(" "),s("li",[t._v("åœ¨æ‰§è¡Œä¸Šä¸‹é—®ä¸ºç©ºçš„æ—¶å€™å»è°ƒç”¨setState\n"),s("ul",[s("li",[t._v("å¯ä»¥ä½¿ç”¨ä¸€æ­¥è°ƒç”¨setTimeout, Promise, MessageChannelç­‰")]),t._v(" "),s("li",[t._v("å¯ä»¥ç›‘å¬åŸç”Ÿäº‹ä»¶ï¼Œæ³¨æ„ä¸æ˜¯åˆæˆäº‹ä»¶ï¼Œåœ¨åŸç”Ÿäº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡ŒsetStateå°±æ˜¯åŒæ­¥çš„")])])])]),t._v(" "),s("p",[s("strong",[t._v("å¼‚æ­¥")])]),t._v(" "),s("ol",[s("li",[t._v("å¦‚æœæ˜¯åˆæˆäº‹ä»¶ä¸­çš„å›è°ƒï¼ŒexecutionContext !== DiscreteEventContextï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥ï¼Œæœ€ç»ˆè¡¨ç°å‡ºå¼‚æ­¥")]),t._v(" "),s("li",[t._v("concurrentæ¨¡å¼ä¸‹éƒ½ä¸ºå¼‚æ­¥")])]),t._v(" "),s("h2",{attrs:{id:"setstate-ä¸ç”Ÿå‘½å‘¨æœŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setstate-ä¸ç”Ÿå‘½å‘¨æœŸ"}},[t._v("#")]),t._v(" setState ä¸ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),s("ol",[s("li",[t._v("constructor ä¸­ä¸éœ€è¦ä½¿ç”¨ state")]),t._v(" "),s("li",[t._v("componentWillMount ä¸­åŒæ­¥çš„æ— ç”¨ï¼Œå¼‚æ­¥å¯ç”¨äºè·å–é¡µé¢çš„åˆå§‹æ•°æ®")]),t._v(" "),s("li",[t._v("render shouldComponentUpdate ç»„ä»¶è¿˜æ²¡æ¸²æŸ“ç»“æŸå°±ç»§ç»­è°ƒç”¨ setState ä¼šæ— é™è§¦å‘æ›´æ–°")]),t._v(" "),s("li",[t._v("å¯ä»¥ç”¨ setState çš„å£°æ˜å‘¨æœŸå‡½æ•°æœ‰ï¼ŒcomponentDidMountï¼ŒcomponentWillReceivePropsï¼ˆgetDerivedStateFromPropsï¼‰ï¼ŒcomponentDidUpdateï¼ˆæ³¨æ„æ­»å¾ªç¯ï¼‰")])]),t._v(" "),s("h2",{attrs:{id:"react-ä¸­-key-çš„ä½œç”¨æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-ä¸­-key-çš„ä½œç”¨æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" react ä¸­ key çš„ä½œç”¨æ˜¯ä»€ä¹ˆ")]),t._v(" "),s("p",[s("strong",[t._v("å•èŠ‚ç‚¹")])]),t._v(" "),s("ol",[s("li",[t._v("keyæ˜¯å•èŠ‚ç‚¹æ˜¯å¦å¤ç”¨çš„ç¬¬ä¸€åˆ¤æ–­æ¡ä»¶ï¼ˆç¬¬äºŒåˆ¤æ–­æ¡ä»¶æ˜¯typeæ˜¯å¦æ”¹å˜ï¼‰ï¼Œå¦‚æœkeyä¸åŒå…¶ä»–æ¡ä»¶æ˜¯å®Œå…¨ä¸çœ‹çš„")]),t._v(" "),s("li",[t._v("åœ¨æ–°å»ºèŠ‚ç‚¹æ—¶ï¼Œkeyéšç€elementå¯¹è±¡è¢«ä¼ å…¥fiberçš„æ„é€ å‡½æ•°")])]),t._v(" "),s("blockquote",[s("p",[t._v("æ‰€ä»¥è¿™é‡Œæ‰æ˜¯keyçš„æ ¸å¿ƒä½œç”¨ï¼Œæ˜¯è°ƒå’Œå‡½æ•°ä¸­ï¼Œé’ˆå¯¹å•ä¸€èŠ‚ç‚¹æ˜¯å¦å¯ä»¥å¤ç”¨çš„ç¬¬ä¸€åˆ¤æ–­æ¡ä»¶ï¼›å¯¹ä¸å•èŠ‚ç‚¹æ¥è®²keyæ˜¯å¯ä»¥çœç•¥çš„ï¼Œreactå†…éƒ¨é»˜è®¤ä¼šè®¾ç½®æˆé»˜è®¤å€¼nullï¼Œåœ¨è¿›è¡Œdiffæ—¶ç”±äºnull === null ä¸º trueï¼Œå‰årenderçš„keyæ—¶ä¸€è‡´çš„ï¼Œå¯ä»¥è¿›è¡Œå¤ç”¨æ¯”è¾ƒï¼›å¦‚æœå•èŠ‚ç‚¹æ˜¾ç¤ºçš„è®¾ç½®äº†keyï¼Œä¸”ä¸¤æ¬¡renderæ—¶çš„keyå¦‚æœä¸ä¸€è‡´ï¼Œåˆ™æ— æ³•å¤ç”¨")])]),t._v(" "),s("p",[s("strong",[t._v("å¤šèŠ‚ç‚¹")])]),t._v(" "),s("ol",[s("li",[t._v("æ–°é˜Ÿåˆ—newChildrenä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆå³reactElementå¯¹è±¡ï¼‰éƒ½éœ€è¦åŒæ—§é˜Ÿåˆ—oldFiberä¸­æœ‰ç›¸åŒkeyå€¼çš„å¯¹è±¡ï¼ˆå³oldFiberå¯¹è±¡ï¼‰è¿›è¡Œæ˜¯å¦å¯å¤ç”¨çš„æ¯”è¾ƒã€‚keyå°±æ˜¯å¿ƒå°±å¯¹è±¡èƒ½å¤Ÿå¯¹åº”èµ·æ¥çš„å”¯ä¸€æ ‡è¯†")]),t._v(" "),s("li",[t._v("å¦‚æœçœç•¥keyæˆ–è€…ç›´æ¥ä½¿ç”¨åˆ—è¡¨indexä½œä¸ºkeyï¼Œè¡¨ç°æ˜¯ä¸€æ ·çš„ï¼ˆkey=nullæ—¶ï¼Œä¼šé‡‡ç”¨indexä»£æ›¿keyè¿›è¡Œæ¯”è¾ƒï¼‰ã€‚åœ¨æ–°æ—§å¯¹è±¡æ¯”è¾ƒæ—¶ï¼Œåªèƒ½æŒ‰ç…§indexé¡ºåºè¿›è¡Œæ¯”è¾ƒï¼Œå¤ç”¨çš„æˆåŠŸç‡å¤§å¤§é™ä½ï¼Œå¤§åˆ—è¡¨ä¼šå‡ºç°æ€§èƒ½é—®é¢˜ã€‚")])]),t._v(" "),s("blockquote",[s("p",[t._v("åœ¨reactä¸­keyæ˜¯æœåŠ¡äºdiffç®—æ³•ï¼Œå®ƒçš„é»˜è®¤å€¼æ˜¯nullï¼Œåœ¨diffç®—æ³•è¿‡ç¨‹ä¸­ï¼Œæ–°æ—§èŠ‚ç‚¹æ˜¯å¦å¯ä»¥å¤ç”¨ï¼Œé¦–å…ˆä¼šåˆ¤å®škeyæ˜¯å¦ç›¸åŒï¼Œå…¶åæ‰ä¼šè¿›è¡Œå…¶ä»–æ¡ä»¶çš„åˆ¤å®šã€‚åœ¨æºç ä¸­é’ˆå¯¹å¤šèŠ‚ç‚¹ï¼ˆå³åˆ—è¡¨ç»„ä»¶ï¼‰å¦‚æœç›´æ¥å°†keyè®¾ç½®æˆindexå’Œä¸è®¾ç½®ä»»ä½•å€¼çš„å¤„ç†æ–¹æ¡ˆæ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœä½¿ç”¨ä¸å½“è½»åˆ™é€ æˆæ€§èƒ½æŸè€—ï¼Œé‡åˆ™å¼•èµ·çŠ¶æ€æ··ä¹±é€ æˆbugã€‚")])]),t._v(" "),s("h2",{attrs:{id:"æ¦‚è¿°ä¸‹-react-ä¸­çš„äº‹ä»¶å¤„ç†é€»è¾‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è¿°ä¸‹-react-ä¸­çš„äº‹ä»¶å¤„ç†é€»è¾‘"}},[t._v("#")]),t._v(" æ¦‚è¿°ä¸‹ React ä¸­çš„äº‹ä»¶å¤„ç†é€»è¾‘")]),t._v(" "),s("p",[t._v("ä¸ºäº†è§£å†³è·¨æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ React ä¼šå°†æµè§ˆå™¨åŸç”Ÿäº‹ä»¶ Browser Native Event å°è£…ä¸ºåˆæˆäº‹ä»¶ SyntheticEvent ä¼ å…¥è®¾ç½®çš„äº‹ä»¶å¤„ç†å™¨ä¸­ã€‚è¿™é‡Œçš„åˆæˆäº‹ä»¶æä¾›äº†ä¸åŸç”Ÿäº‹ä»¶ç›¸åŒçš„æ¥å£ä¸è¿‡å®ƒä»¬å±è”½äº†åº•å±‚æµè§ˆå™¨çš„ç»†èŠ‚å·®å¼‚ä¿è¯äº†è¡Œä¸ºçš„ä¸€è‡´æ€§ã€‚å¦å¤–æœ‰æ„æ€çš„æ˜¯ React å¹¶æ²¡æœ‰ç›´æ¥å°†äº‹ä»¶é™„ç€åˆ°å­å…ƒç´ ä¸Šè€Œæ˜¯ä»¥å•ä¸€äº‹ä»¶ç›‘å¬å™¨çš„æ–¹å¼å°†æ‰€æœ‰çš„äº‹ä»¶å‘é€åˆ°é¡¶å±‚è¿›è¡Œå¤„ç†ã€‚è¿™æ · React åœ¨æ›´æ–° DOM çš„æ—¶å€™å°±ä¸éœ€è¦è€ƒè™‘å¦‚ä½•å»å¤„ç†é™„ç€åœ¨ DOM ä¸Šçš„äº‹ä»¶ç›‘å¬å™¨æœ€ç»ˆè¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„")]),t._v(" "),s("p",[t._v("åŒºåˆ«ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("å¯¹äºæ—¶é—´åç§°å‘½åæ–¹å¼ï¼ŒåŸç”Ÿæ—¶é—´ä¸ºå…¨å°å†™ï¼Œreact äº‹ä»¶é‡‡ç”¨å°é©¼å³°")]),t._v(" "),s("li",[t._v("å¯¹äºæ—¶é—´å‡½æ•°å¤„ç†è¯­æ³•ï¼ŒåŸç”Ÿäº‹ä»¶ä¸ºå­—ç¬¦ä¸²ï¼Œreact äº‹ä»¶ä¸ºå‡½æ•°ï¼›")]),t._v(" "),s("li",[t._v("react äº‹ä»¶ä¸èƒ½é‡‡ç”¨return false çš„æ–¹å¼æ¥é˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºï¼Œè€Œå¿…é¡»è¦æ˜ç¡®çš„è°ƒç”¨preventDefault(ï¼‰æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚\nåˆæˆäº‹ä»¶æ˜¯ react æ¨¡æ‹ŸåŸç”Ÿçš„ DOM äº‹ä»¶æ‰€æœ‰èƒ½åŠ›çš„ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œå…¶ä¼˜ç‚¹å¦‚ä¸‹ï¼š")]),t._v(" "),s("li",[t._v("å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼Œæ›´å¥½çš„è·¨å¹³å°")]),t._v(" "),s("li",[t._v("å°†äº‹ä»¶ç»Ÿä¸€å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ï¼Œé¿å…é¢‘ç¹çš„æ–°å¢è¯­åˆ é™¤")]),t._v(" "),s("li",[t._v("æ–¹ä¾¿ react ç»Ÿä¸€ç®¡ç†å’Œäº‹åŠ¡æœºåˆ¶")]),t._v(" "),s("li",[t._v("äº‹ä»¶çš„æ‰§è¡Œé¡ºåºä¸ºåŸç”Ÿäº‹ä»¶çº¿æ‰§è¡Œï¼Œåˆæˆäº‹ä»¶åæ‰§è¡Œï¼Œåˆæˆäº‹ä»¶ä¼šå†’æ³¡ç»‘å®šåˆ° document ä¸Šï¼Œæ‰€ä»¥å°½é‡é¿å…åˆæˆäº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶æ··ç”¨ï¼Œå¦‚æœåŸç”Ÿäº‹ä»¶é˜»æ­¢å†’æ³¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆæˆäº‹ä»¶ä¸æ‰§è¡Œï¼Œå› ä¸ºéœ€è¦å†’æ³¡åˆ° document ä¸Šåˆæˆäº‹ä»¶æ‰ä¼šæ‰§è¡Œã€‚\nreact æ€ä¹ˆåšäº‹ä»¶ä»£ç†ï¼ŒåŸç†æ˜¯å•¥")]),t._v(" "),s("li",[t._v("react åŸºäº virtual dom å®ç°äº†ä¸€ä¸ª syntheticEvent å±‚ï¼ˆåˆæˆäº‹ä»¶å±‚ï¼‰ï¼Œå®šä¹‰çš„äº‹ä»¶å¤„ç†å™¨ä¼šæ¥å—åˆ°ä¸€ä¸ªåˆæˆäº‹ä»¶å¯¹è±¡çš„å®ä¾‹ï¼Œå®ƒç¬¦åˆ w3c æ ‡å‡†ï¼Œä¸”ä¸åŸç”Ÿçš„æµè§ˆå™¨äº‹ä»¶æ‹¥æœ‰åŒæ ·çš„å€Ÿå£ï¼Œæ”¯æŒå†’æ³¡æœºåˆ¶ï¼Œæ‰€æœ‰äº‹ä»¶éƒ½ä¼šç»‘å®šåˆ°æœ€å¤–å±‚ä¸Šã€‚")])]),t._v(" "),s("h2",{attrs:{id:"hookç›¸å…³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hookç›¸å…³"}},[t._v("#")]),t._v(" hookç›¸å…³")]),t._v(" "),s("p",[s("strong",[t._v("å†™è¿‡ä»€ä¹ˆ hookså—")])]),t._v(" "),s("ol",[s("li",[t._v("useErrorBoundary")])]),t._v(" "),s("p",[s("strong",[t._v("hook ä¸­æŒä¹…åŒ–æ–¹å¼")])]),t._v(" "),s("ol",[s("li",[t._v("useRef")])]),t._v(" "),s("p",[s("strong",[t._v("useState")])]),t._v(" "),s("ol",[s("li",[t._v("å¯ä»¥è¿›è¡Œå‡½æ•°å¼æ›´æ–°")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" changeCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("changeCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevCount")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" prevCount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("useRef")])]),t._v(" "),s("ol",[s("li",[t._v("æŒ‚è½½ dom èŠ‚ç‚¹")]),t._v(" "),s("li",[t._v("æ¨¡æ‹Ÿç±»ç»„ä»¶çš„ thisï¼Œå……å½“æŒä¹…åŒ–æ•°æ®å¯¹è±¡")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("useRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. æŒ‚è½½domèŠ‚ç‚¹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" container "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'container'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€æ¬¡æ‹¿ä¸åˆ°")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'container'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// current å±æ€§å¼•ç”¨ç€è™šæ‹Ÿ DOM èŠ‚ç‚¹ ")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Refå®¹å™¨ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. æ¨¡æ‹Ÿç±»ç»„ä»¶çš„thisï¼Œå……å½“æŒä¹…åŒ–æ•°æ®å¯¹è±¡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" container "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ¨¡æ‹Ÿ componentDidUpdateï¼Œå³é™¤äº†åˆå§‹åŒ–ï¼Œä¹‹åçš„æ›´æ–°è¿›åˆ°è¿™é‡Œ'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Refå®¹å™¨ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("p",[s("strong",[t._v("useCallback(fn, depArrs)")])]),t._v(" "),s("ol",[s("li",[t._v("ç›®çš„ï¼šçˆ¶ç»„ä»¶æ›´æ–°ä¸å¸Œæœ›å­ç»„ä»¶æ›´æ–°")]),t._v(" "),s("li",[t._v("è§£å†³ï¼šçˆ¶ç»„ä»¶ç”¨useCallbackåŒ…è£¹ä¼ é€’ç»™å­ç»„ä»¶çš„å‡½æ•°ï¼ŒuseCallbackæŒä¹…åŒ–ç¼“å­˜åŒ…è£¹çš„å‡½æ•°")]),t._v(" "),s("li",[t._v("è¿”å›å‡½æ•°")]),t._v(" "),s("li",[t._v("useCallback å¯ä»¥å¯¹å‡½æ•°è¿›è¡Œç¼“å­˜ï¼Œ ä¿è¯ onChange ä¸ä¼šéšç€ç»„ä»¶æ›´æ–°è€Œæ”¹å˜å¼•ç”¨")])]),t._v(" "),s("p",[s("strong",[t._v("memo(fn, validFn)")])]),t._v(" "),s("ol",[s("li",[t._v("propsä¸å˜åŒ–ï¼Œä¸é‡æ–°æ¸²æŸ“")]),t._v(" "),s("li",[t._v("æ¨¡æ‹Ÿ shouldComponentUpdate")]),t._v(" "),s("li",[t._v("validFn æ”¾ä¸ª shallowEqual")]),t._v(" "),s("li",[t._v("è¿”å›ä¸€ä¸ªç»„ä»¶")]),t._v(" "),s("li",[t._v("åŒ…è£¹ç»„ä»¶ï¼Œç»„ä»¶å±‚é¢")]),t._v(" "),s("li",[t._v("memo ä¼šé»˜è®¤å¯¹æ‰€æœ‰ props è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœä¸å‘ç”Ÿå˜åŒ–åˆ™ä¸æ›´æ–°ç»„ä»¶ï¼Œé¿å…çˆ¶çº§å¼•èµ·çš„å­çº§æ¸²æŸ“")])]),t._v(" "),s("p",[s("strong",[t._v("useMemo")])]),t._v(" "),s("ol",[s("li",[t._v("å’Œvueä¸­componentå·®ä¸å¤šï¼Œç”¨æ³•å¦‚useCallback")]),t._v(" "),s("li",[t._v("è¿”å›å‡½æ•°çš„è°ƒç”¨ç»“æœ")])]),t._v(" "),s("p",[s("strong",[t._v("useContext")])]),t._v(" "),s("ol",[s("li",[t._v("hooks ç‰ˆæœ¬çš„ context")]),t._v(" "),s("li",[t._v("Context.Provider åŒ…è£¹åçš„å­ç»„ä»¶èƒ½æ‹¿åˆ° context")]),t._v(" "),s("li",[t._v("ä¸å—ç»„ä»¶ä¼˜åŒ–çš„å½±å“")]),t._v(" "),s("li",[t._v("ä½¿ç”¨")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useContext "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. åˆ›å»ºå…±äº«æ•°æ®æºå¯¹è±¡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Context "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. çˆ¶ç»„ä»¶ä½¿ç”¨ Provider åŒ…è£¹æ‰€æœ‰åä»£ç»„ä»¶")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" changeCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      changeCount\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Provider value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("changeCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("åŠ ä¸€"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Sub1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Provider"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. å­ç»„ä»¶ä½¿ç”¨ useContext è°ƒç”¨æ–¹æ³•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sub1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("changeCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("c")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         Sub1 èƒ½é€šè¿‡ Context è®¿é—®æ•°æ®æº "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("p",[s("strong",[t._v("useImperativeHandle + forwardRef")])]),t._v(" "),s("ol",[s("li",[t._v("é™åˆ¶çˆ¶ç»„ä»¶è®¿é—®çš„èŒƒå›´")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("\n")])])]),s("p",[s("strong",[t._v("è‡ªå®šä¹‰hook")])]),t._v(" "),s("ol",[s("li",[t._v("ä¸€èˆ¬ä½¿ç”¨å®˜æ–¹çš„hookäºŒæ¬¡å®ç°")])]),t._v(" "),s("p",[s("strong",[t._v("useSelector useDispatch")])]),t._v(" "),s("p",[s("strong",[t._v("useLocation, useHistory, useParams")])]),t._v(" "),s("h2",{attrs:{id:"react-ä¸­çš„æ·±åº¦ä¼˜å…ˆéå†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-ä¸­çš„æ·±åº¦ä¼˜å…ˆéå†"}},[t._v("#")]),t._v(" react ä¸­çš„æ·±åº¦ä¼˜å…ˆéå†")]),t._v(" "),s("p",[t._v("ç¬¦åˆæ¡ä»¶A æˆ–è€…ç¬¦åˆæ¡ä»¶Båˆ™ä¸ä¼šéå†å…¶å­èŠ‚ç‚¹ï¼Œè€Œç›´æ¥åˆ¤æ–­æ˜¯å¦æœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œåˆ™å›åˆ°æœ‰å…„å¼ŸèŠ‚ç‚¹çš„ç›´ç³»çˆ¶èŠ‚ç‚¹ï¼Œé‡æ–°å¼€å§‹å¤–å±‚çš„ while å¾ªç¯")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag ç¬¦åˆæ¡ä»¶"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ“ä½œA ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag ç¬¦åˆæ¡ä»¶"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ“ä½œB ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("child "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node \n    node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("child \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("continue")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" nodeRoot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sibling "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" nodeRoot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sibling"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return \n  node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sibling\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"diff"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#diff"}},[t._v("#")]),t._v(" DIFF")]),t._v(" "),s("p",[s("strong",[t._v("å•èŠ‚ç‚¹diff")])]),t._v(" "),s("ul",[s("li",[t._v("åˆ¤æ–­æ˜¯å¦æœ‰è€çš„fiberèŠ‚ç‚¹ --ã€‹æ²¡æœ‰ç›´æ¥ç”Ÿæˆæ–°fiber")]),t._v(" "),s("li",[t._v("åˆ¤æ–­keyæ˜¯å¦æœ‰ç›¸åŒ  --ã€‹ä¸åŒç›´æ¥åˆ é™¤ å†æŸ¥æ‰¾ä¸‹ä¸€ä¸ªè€fiber")]),t._v(" "),s("li",[t._v("åˆ¤æ–­typeæ˜¯å¦ç›¸åŒ  --ã€‹ä¸åŒç›´æ¥åˆ é™¤å½“å‰fiberåœ¨å†…çš„æ‰€æœ‰è€çš„fiber --ã€‹ç”Ÿæˆæ–°çš„fiber")]),t._v(" "),s("li",[t._v("åˆ é™¤å‰©ä¸‹çš„å…¶ä»–è€çš„fiber --ã€‹æœç”¨è€fiberå¹¶è¿”å›")])]),t._v(" "),s("p",[s("strong",[t._v("å¤šèŠ‚ç‚¹diff")])]),t._v(" "),s("ol",[s("li",[t._v("ç¬¬ä¸€è½®éå†")])]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœkeyä¸åŒåˆ™ç›´æ¥ç»“æŸæœ¬è½®å¾ªç¯")]),t._v(" "),s("li",[t._v("newChildrenæˆ–oldFiberéå†å®Œï¼Œç»“æŸæœ¬è½®å¾ªç¯")]),t._v(" "),s("li",[t._v("keyç›¸åŒè€Œtypeä¸åŒï¼Œæ ‡è®°è€çš„oldFiberä¸ºåˆ é™¤ï¼Œç»§ç»­å¾ªç¯")]),t._v(" "),s("li",[t._v("keyç›¸åŒè€Œtypeä¹Ÿç›¸åŒï¼Œåˆ™å¯ä»¥æœç”¨è€oldFiberèŠ‚ç‚¹ï¼Œç»§ç»­å¾ªç¯")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("ç¬¬äºŒè½®éå†")])]),t._v(" "),s("ul",[s("li",[t._v("newChildrenéå†å®Œè€ŒoldFiberè¿˜æœ‰ï¼Œéå†å‰©ä¸‹æ‰€æœ‰çš„oldFiberæ ‡è®°ä¸ºåˆ é™¤ï¼ŒDIFFç»“æŸ")]),t._v(" "),s("li",[t._v("oldFiberéå†å®Œï¼Œè€ŒnewChildrenè¿˜æœ‰ï¼Œå°†å‰©ä¸‹çš„newChildrenæ ‡è®°ä¸ºæ’å…¥ï¼ŒDIFFç»“æŸ")]),t._v(" "),s("li",[t._v("newChildrenå’ŒoldFiberéƒ½æ²¡æœ‰å®Œæˆï¼Œåˆ™è¿›è¡ŒèŠ‚ç‚¹ç§»åŠ¨çš„é€»è¾‘")])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("ç¬¬ä¸‰è½®")])]),t._v(" "),s("ul",[s("li",[t._v("å¤„ç†èŠ‚ç‚¹ç§»åŠ¨çš„æƒ…å†µ")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("ä¾‹å­\nè€ï¼šA--\x3eB--\x3eC--\x3eD--\x3eE--\x3eF\næ–°ï¼šA--\x3eC--\x3eE--\x3eB--\x3eG--\x3eD")])]),t._v(" "),s("ul",[s("li",[t._v("ç¬¬ä¸€è½®æ¯”è¾ƒAå’ŒAï¼Œç›¸åŒå¯ä»¥å¤ç”¨ï¼Œæ›´æ–°ï¼Œç„¶åæ¯”è¾ƒBå’ŒCï¼Œkeyä¸åŒç›´æ¥è·³å‡ºç¬¬ä¸€ä¸ªå¾ªç¯")]),t._v(" "),s("li",[t._v("æŠŠå‰©ä¸‹çš„oldFiberæ”¾å…¥existingChildrenè¿™ä¸ªmapä¸­")]),t._v(" "),s("li",[t._v("ç„¶åå£°æ˜ä¸€ä¸ªlastPlacedIndexå˜é‡ï¼Œè¡¨ç¤ºä¸éœ€è¦ç§»åŠ¨çš„è€èŠ‚ç‚¹çš„ç´¢å¼•ï¼Œé»˜è®¤ä¸º0")]),t._v(" "),s("li",[t._v("ç»§ç»­å¾ªç¯å‰©ä¸‹çš„è™šæ‹ŸdomèŠ‚ç‚¹ï¼Œä»Cå¼€å§‹")]),t._v(" "),s("li",[t._v("å¦‚æœèƒ½åœ¨mapä¸­æ‰¾åˆ°ç›¸åŒkeyç›¸åŒtypeçš„èŠ‚ç‚¹åˆ™å¯ä»¥å¤ç”¨è€fiberï¼Œå¹¶æŠŠæ­¤fiberä»mapä¸­åˆ é™¤")]),t._v(" "),s("li",[t._v("å¦‚æœåœ¨mapä¸­æ‰¾ä¸åˆ°ç›¸åŒkeyç›¸åŒtypeçš„èŠ‚ç‚¹åˆ™åˆ›å»ºæ–°çš„fiberèŠ‚ç‚¹")]),t._v(" "),s("li",[t._v("å¦‚æœæ˜¯å¤ç”¨è€çš„fiberï¼Œåˆ™åˆ¤æ–­è€fiberçš„ç´¢å¼•æ˜¯å¦å°äºlastPlacedIndex")]),t._v(" "),s("li",[t._v("å¦‚æœå°äºlastPlacedIndexåˆ™éœ€è¦ç§»åŠ¨è€fiberï¼ŒlastPlacedIndexä¸å˜")]),t._v(" "),s("li",[t._v("å¦‚æœå¤§é›¨lastPlacedIndexåˆ™ä¸éœ€è¦ç§»åŠ¨è€fiberï¼Œæ›´æ–°lastPlaecdIndexä¸ºè€fiberçš„index")]),t._v(" "),s("li",[t._v("è™šæ‹ŸDOMå¾ªç¯ç»“æŸå§mapä¸­æ‰€æœ‰å‰©ä¸‹çš„fiberå…¨éƒ¨æ ‡è®°ä¸ºåˆ é™¤")])]),t._v(" "),s("h2",{attrs:{id:"reactdom-render-element-container-callback-æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reactdom-render-element-container-callback-æµç¨‹"}},[t._v("#")]),t._v(" ReactDOM.render(element, container, callback) æµç¨‹")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("åˆ›å»º react root")])]),t._v(" "),s("li",[s("p",[t._v("åˆ›å»º fiber root")])]),t._v(" "),s("li",[s("p",[t._v("åˆ›å»º root fiber")])]),t._v(" "),s("li",[s("p",[t._v("new FiberNode ä½œä¸º RootFiber è¿”å›")])]),t._v(" "),s("li",[s("p",[t._v("å°† RootFiber æ”¾åˆ° root å¯¹è±¡çš„ current å±æ€§ï¼Œ container æ”¾åˆ° containerInfo å±æ€§ï¼Œå¹¶åˆå§‹åŒ–å…¶ä»–å±æ€§")])]),t._v(" "),s("li",[s("p",[t._v("å°† RootFiber å¯¹è±¡çš„ stateNode å±æ€§è®¾ç½®ä¸º FiberRoot")])]),t._v(" "),s("li",[s("p",[t._v("è¿”å› FiberRoot")])]),t._v(" "),s("li",[s("p",[t._v("å°† FiberRoot æ”¾åˆ° ReactRoot å®ä¾‹çš„ _internalRoot ä¸Š")])]),t._v(" "),s("li",[s("p",[t._v("è¿”å› ReactRoot")])]),t._v(" "),s("li",[s("p",[t._v("å°†ç¬¬ä¸‰ä¸ªå‚æ•° callback çš„æ‰§è¡Œç¯å¢ƒç»‘å®šä¸ºä¼ç»„ä»¶çš„ FiberRoot å¯¹è±¡")])]),t._v(" "),s("li",[s("p",[t._v("å¼€å§‹è°ƒç”¨ ReactRoot å®ä¾‹çš„ render å‡½æ•°ï¼Œä¼ å…¥ ReactDOM.renderçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ç¬¬ä¸‰ä¸ªå‚æ•°")])]),t._v(" "),s("li",[s("p",[t._v("åˆ›å»º ReactWork å¯¹è±¡å®ä¾‹ï¼Œå°†ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥è¿™ä¸ªå®ä¾‹çš„ _callbacks å±æ€§ä¸Šï¼Œåœ¨ container æ›´æ–°æäº¤é˜¶æ®µå®Œæˆä¹‹åçš„æ‰§è¡Œå›è°ƒ")])]),t._v(" "),s("li",[s("p",[t._v("å¼€å§‹å¤„ç† container çš„ fiber")])]),t._v(" "),s("li",[s("p",[t._v("è®¡ç®— container å¯¹åº” fiber çš„åˆ°æœŸæ—¶é—´ expirationTime")])]),t._v(" "),s("li",[s("p",[t._v("ä¸º container çš„ fiber è®¾ç½® context")])]),t._v(" "),s("li",[s("p",[t._v("è°ƒç”¨ scheduleRootUpdate å¼€å§‹è¿›å…¥å¯¹ root çš„æ›´æ–°è°ƒåº¦é˜¶æ®µ")])]),t._v(" "),s("li",[s("p",[t._v("åˆ©ç”¨åˆ°æœŸæ—¶é—´åˆ›å»ºæ›´æ–°å™¨ï¼šcreateUpdate")])]),t._v(" "),s("li",[s("p",[t._v("å°†ç¬¬ä¸€ä¸ª react ç»„ä»¶ app ä½œä¸ºæ›´æ–°å™¨çš„ payload")])]),t._v(" "),s("li",[s("p",[t._v("å°†ç¬¬ä¸‰ä¸ªå‚æ•°å›è°ƒå‡½æ•°æ‰§è¡Œå™¨ä½œä¸ºæ›´æ–°å™¨çš„ callback")])]),t._v(" "),s("li",[s("p",[t._v("åˆ·æ–°å‰¯ä½œç”¨ï¼Œä¸commitRootç›¸å…³")])]),t._v(" "),s("li",[s("p",[t._v("å°†æ›´æ–°å™¨åŠ å…¥ container çš„ fiber ä¸Šçš„æ›´æ–°é˜Ÿåˆ—ä¸­ enqueueUpdate")])]),t._v(" "),s("li",[s("p",[t._v("scheduleWork(current, expirationTime) æ­£å¼è¿›å…¥å¯¹ container çš„fiberæ ‘çš„å¾ªç¯æ›´æ–°è°ƒåº¦é˜¶æ®µ")])]),t._v(" "),s("li",[s("p",[t._v("å¼€å§‹å¯¹ fiber æ ‘æ›´æ–°ä»»åŠ¡è¿›è¡Œè°ƒåº¦")])]),t._v(" "),s("li",[s("p",[t._v("å°†å½“å‰æ›´æ–°ä»»åŠ¡å¯¹åº”çš„åˆ°æœŸæ—¶é—´ä¸å½“å‰ fiber ä¸Šå­˜å‚¨çš„æœ€é«˜ä¼˜å…ˆçº§æ›´æ–°ä»»åŠ¡åˆ°æœŸæ—¶é—´ç›¸æ¯”ï¼Œæ¥æ›´æ–° fiber.expirationTimeã€‚ä»å‘ç”Ÿæ›´æ–°ä»»åŠ¡çš„ fiber å¼€å§‹å¾€ä¸Šéå†æ›´æ–°fiberæ ‘ä¸Šæ¯ä¸ªèŠ‚ç‚¹çš„ childExpirationTime, è¿™ä¸ªå€¼å¯¹åº”ç€è¿™ä¸ª fiber å­æ ‘ä¸Šä¼˜å…ˆçº§æœ€é«˜çš„æ›´æ–°ä»»åŠ¡çš„åˆ°æœŸæ—¶é—´ã€‚current-fiber ä¸ workingprogress-fiberéƒ½ä¼šè¿›è¡ŒåŒæ ·çš„å¤„ç†ã€‚æœ€ç»ˆéå†åˆ°rootfiberä¹‹åï¼Œç»“æŸéå†å¹¶è¿”å›fiber.stateNode")])]),t._v(" "),s("li",[s("p",[t._v("å¦‚æœå½“å‰           ä¸å¤„äºrenderRootä¸commitRootçš„é˜¶æ®µï¼Œå¹¶ä¸”ä¹‹å‰æœ‰æ›´æ–°ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œå¹¶ä¸”å½“å‰çš„æ›´æ–°ä»»åŠ¡çš„åˆ°æœŸæ—¶é—´æ¯”è®¡åˆ’æ‰§è¡Œçš„æ›´æ–°ä»»åŠ¡åˆ°æœŸæ—¶é—´çš„ä¼˜å…ˆçº§é«˜ï¼Œåˆ™è®°å½•ä¸‹æ‰“æ–­è®¡åˆ’ä»»åŠ¡çš„è¿™ä¸ªfiberåˆ°interruptedByä¸Šï¼Œç„¶åè°ƒç”¨resetStacké‡ç½®æ ˆã€‚")])]),t._v(" "),s("li",[s("p",[t._v("åˆ©ç”¨ expirationTime æ¥æ›´æ–° fiberRoot ä¸Šè®°å½•çš„æ‰€æœ‰å­èŠ‚ç‚¹æ›´æ–°ä»»åŠ¡åˆ°æœŸæ—¶é—´çš„åŒºé—´[earliestPendingTIme, lastestPendingTime], è¿™ä¸ªåŒºé—´æ˜¯rootæ ‘ä¸Šçš„è¿˜æœªæ›´æ–°çš„ä»»åŠ¡åˆ°æœŸæ—¶é—´çš„åŒºé—´")])]),t._v(" "),s("li",[s("p",[t._v("å½“å‰å‘ç”Ÿçš„æ›´æ–°ä»»åŠ¡çš„åˆ°æœŸæ—¶é—´expirationTimeä¸fiberRootä¸Šæ›´æ–°ä»»åŠ¡åˆ°æœŸæ—¶é—´[earliestPendingTIme, lastestPendingTime]æ¯”è¾ƒï¼Œå¦‚æœè½åœ¨åŒºé—´å†…ï¼Œåˆ™ä¸éœ€è¦ä¿®æ”¹åŒºé—´ï¼›å¦åˆ™æ›´æ”¹åŒºé—´çš„æŸä¸€ä¸ªè¾¹ç•Œ")])]),t._v(" "),s("li",[s("p",[t._v("è®¾ç½® root.nextExplrationTimeToWorkOn: å¦‚æœearliesPendingTime !== 0 å³å­˜åœ¨éœ€è¦æ›´æ–°çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆ nextExpirationTimeToWorkOnä¸ºearliestPendingTimeã€‚å¦åˆ™è¡¨ç¤ºä¸å­˜åœ¨éœ€è¦æ›´æ–°çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆå¦‚æœlatestPingedTime !== 0 å³å­˜åœ¨éœ€è¦æ¸²æŸ“ä¸ºsuspendç»„ä»¶ï¼Œé‚£ä¹ˆnextExpirationTimeToWorkOnä¸ºlastestPingedTimeã€‚å¦åˆ™å°†å½“å‰æ›´æ–°ä»»åŠ¡åˆ°æœŸæ—¶é—´ä¸[earliestSuspendedTime,lastestSuspendTime]ã€‚è®¾ç½® root.expirationTimeToWorkOnä¼˜å…ˆçº§æœ€é«˜çš„åˆ°æœŸæ—¶é—´ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("å¦‚æœå½“å‰ä¸å¤„äºrenderRootä¸commitRootå‡½æ•°æ‰§è¡Œé˜¶æ®µæˆ–è€…å¤„äºcommitRooté˜¶æ®µæˆ–è€…ä¸‹æ¸²æŸ“çš„æ˜¯å…¶ä»–rootï¼Œåˆ™è°ƒç”¨requestWorkå°±å¼€å§‹å¯¹rootFiberè¿›è¡Œè°ƒåº¦")])])]),t._v(" "),s("h2",{attrs:{id:"react-æ•°æ®ç»“æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-æ•°æ®ç»“æ„"}},[t._v("#")]),t._v(" react æ•°æ®ç»“æ„")]),t._v(" "),s("ol",[s("li",[t._v("FiberRootNode")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("FiberRootNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("containerInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hydrate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// LegacyRoot, BlockingRoot, ConcurrentRoot ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("containerINfo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" containerInfo "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rootèŠ‚ç‚¹ï¼Œrenderå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// current: Fiber å¯¹è±¡ï¼Œå¯¹åº”çš„æ˜¯ root èŠ‚ç‚¹ï¼Œå³æ•´ä¸ªåº”ç”¨æ ¹å¯¹è±¡")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("finishedWork "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨commité˜¶æ®µåªä¼šå¤„ç†è¯¥å€¼å¯¹åº”çš„ä»»åŠ¡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("blockquote",[s("p",[t._v("FiberRoot --\x3e rootFiber --\x3e App\nFiberRoot åœ¨æ•´ä¸ªåº”ç”¨ä¸­åªèƒ½æœ‰ä¸€ä¸ªï¼ŒRootFiberå¯ä»¥æœ‰å¤šä¸ª(å¯ä»¥å†™å¤šä¸ª, ReactDom.render()æ–¹æ³•)")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("FiberNode")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("FiberNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// instance ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰ Fiber çš„ç±»å‹ï¼šClassComponent FunctionComponent HostComponent ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" key \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elementType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stateNode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" \n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fiber é“¾è¡¨ ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘çˆ¶çº§ç»„ä»¶")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("child "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘å­çº§fiber ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sibling "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘å…„å¼Ÿfiber  ")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ref "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" \n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°ç›¸å…³")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pendingProps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pendingProps  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†è¦æ‰§è¡Œæ›´æ–°çš„å±æ€§")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedProps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸Šä¸€æ¬¡æ›´æ–°çš„ props ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("updateQueue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°é˜Ÿåˆ—")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸Šä¸€æ¬¡æ›´æ–°çš„State ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€ä¸ªåˆ—è¡¨å­˜åœ¨fiberä¾èµ–çš„contextsï¼Œevents ")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TypedOfMode, StrictNode / COncurrentMode ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mode \n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Effects ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("flags "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoFlags "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰ fiber é˜¶æ®µéœ€è¦è¿›è¡Œä»»åŠ¡ï¼ŒåŒ…æ‹¬ï¼šå ä½ï¼Œæ›´æ–°ï¼Œåˆ é™¤ç­‰")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextEffect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å•é“¾è¡¨ç”¨æ¥å¿«é€ŸæŸ¥æ‰¾ä¸‹ä¸€ä¸ªside Effect ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstEffect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­æ ‘ä¸­ç¬¬ä¸€ä¸ª side effect ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastEffect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­æ ‘ä¸­æœ€åä¸€ä¸ª side effect ")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å’Œ lanes ä¼˜å…ˆçº§ç›¸å…³")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lanes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoLanes "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¡¨ç¤ºå½“å‰èŠ‚ç‚¹æ˜¯å¦éœ€è¦æ›´æ–°")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childLanes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoLanes "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯å¦éœ€è¦æ›´æ–°")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// currentæ ‘å’ŒworkInProgressæ ‘ä¸­èŠ‚ç‚¹ç›¸äº’å…³è”çš„å±æ€§")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ä»¥ç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°è¿˜æ˜¯åˆ›å»ºï¼Œæœ‰å€¼è¡¨ç¤ºæ›´æ–°ï¼Œåä¹‹åˆ™éœ€è¦åˆ›å»º")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alternate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"render-æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#render-æµç¨‹"}},[t._v("#")]),t._v(" render æµç¨‹")]),t._v(" "),s("p",[t._v("renderçš„æ—¶å€™é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªfiberRootï¼Œåˆ›å»ºä¸€ä¸ªworkInProcessï¼ˆæ­£åœ¨å†…å­˜ä¸­æ„å»ºçš„fiberæ ‘ï¼‰ï¼Œbenginworkï¼ŒcompleteWork")]),t._v(" "),s("h2",{attrs:{id:"fiberåŒç¼“å­˜è§£å†³ä»€ä¹ˆé—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fiberåŒç¼“å­˜è§£å†³ä»€ä¹ˆé—®é¢˜"}},[t._v("#")]),t._v(" fiberåŒç¼“å­˜è§£å†³ä»€ä¹ˆé—®é¢˜")]),t._v(" "),s("p",[t._v("å‡ºç°æ›´æ–°çš„æ—¶å€™é¦–å…ˆåœ¨å†…å­˜ä¸­ä¿®æ”¹è¿™é¢—è™šæ‹Ÿçš„æ ‘ï¼Œæ›´æ–°å®Œæˆä¹‹åï¼Œå†commitRootæ›´æ–°åˆ°ç”¨æˆ·ç•Œé¢")]),t._v(" "),s("h2",{attrs:{id:"ä¼˜å…ˆçº§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜å…ˆçº§"}},[t._v("#")]),t._v(" ä¼˜å…ˆçº§")]),t._v(" "),s("ol",[s("li",[t._v("ä»€ä¹ˆæ—¶å€™åˆ†é…ä¼˜å…ˆçº§ï¼Ÿ åˆ›å»ºfiberNodeæ—¶")]),t._v(" "),s("li",[t._v("LanePriorityï¼ˆè°ƒå’Œå™¨é‡Œé¢ï¼‰ schedulePriorityï¼ˆè°ƒåº¦å™¨é‡Œé¢ï¼‰ ReactPriorityLevelï¼ˆè°ƒå’Œå™¨é‡Œé¢ï¼‰")]),t._v(" "),s("li",[t._v("schedulePriority å’Œ LanePriority")])]),t._v(" "),s("h2",{attrs:{id:"scheduler-è°ƒåº¦ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scheduler-è°ƒåº¦ç®¡ç†"}},[t._v("#")]),t._v(" scheduler è°ƒåº¦ç®¡ç†")]),t._v(" "),s("ol",[s("li",[t._v("ä¸¤å¤§å·¥ä½œä»»åŠ¡")]),t._v(" "),s("li",[t._v("ä»»åŠ¡å¦‚ä½•ä¸­æ–­ï¼Œå¦‚ä½•æ‰§è¡Œ\næ ¹æ®ä¼˜å…ˆçº§æƒ…å†µä¸­æ–­ï¼Œ")]),t._v(" "),s("li",[t._v("requestIdleCallback")]),t._v(" "),s("li",[t._v("messageChannel ä½œç”¨")])]),t._v(" "),s("ul",[s("li",[t._v("ç”Ÿæˆæµè§ˆå™¨EventLoopä¸­çš„ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå®ç°å°†ä¸»çº¿ç¨‹è¿˜ç»™æµè§ˆå™¨ï¼Œä»¥ä¾¿æµè§ˆå™¨æ›´æ–°é¡µé¢")]),t._v(" "),s("li",[t._v("æµè§ˆå™¨æ›´æ–°é¡µé¢åèƒ½å¤Ÿç»§ç»­æ‰§è¡Œæœªå®Œæˆçš„Schedulerä¸­çš„ä»»åŠ¡")]),t._v(" "),s("li",[t._v("ä¸ç”¨å¾®ä»»åŠ¡è¿­ä»£çš„åŸå› æ˜¯ï¼Œå¾®ä»»åŠ¡å°†åœ¨é¡µé¢æ›´æ–°å‰å…¨éƒ¨æ‰§è¡Œå®Œï¼Œè¾¾ä¸åˆ°ä¸»çº¿ç¨‹è¿˜ç»™æµè§ˆå™¨çš„ç›®çš„")]),t._v(" "),s("li",[t._v("é€‰æ‹© MessageChannel  çš„åŸå› æ˜¯å› ä¸º setTimeout(fn, 0)æ‰€åˆ›å»ºçš„å®ä»»åŠ¡è‡³å°‘4msçš„æ‰§è¡Œæ—¶å·®")])]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("shouldYield")]),t._v(" "),s("li",[t._v("taskQueue å°é¡¶å †")])]),t._v(" "),s("h2",{attrs:{id:"concurrentæ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concurrentæ¨¡å¼"}},[t._v("#")]),t._v(" concurrentæ¨¡å¼")]),t._v(" "),s("p",[t._v("å°†æ¸²æŸ“å·¥ä½œåˆ†è§£ä¸ºå¤šä¸ªéƒ¨åˆ†ï¼Œå¯¹ä»»åŠ¡è¿›è¡Œæš‚åœå’Œæ¢å¤æ“ä½œä»¥é¿å…é˜»å¡æµè§ˆå™¨ã€‚è¿™æ„å‘³ç€Reactå¯ä»¥å†æäº¤ä¹‹å‰å¤šæ¬¡è°ƒç”¨æ¸²æŸ“é˜¶æ®µç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ï¼Œæˆ–è€…åœ¨ä¸æäº¤çš„æƒ…å†µä¸‹è°ƒç”¨ä»–ä»¬\næ•´ä¸ªschedulerçš„ä»»åŠ¡è°ƒåº¦ï¼Œæ—¶é—´åˆ‡ç‰‡ï¼Œä»»åŠ¡ä¸­æ–­åŠæ¢å¤éƒ½ä¾èµ–äºconcurentæ¨¡å¼åŠFiberæ•°æ®ç»“æ„")])])}),[],!1,null,null,null);s.default=n.exports}}]);